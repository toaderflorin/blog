<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.25.7"/><style data-href="/styles.a143479275fa8033557c.css" data-identity="gatsby-global-css">@font-face{font-family:gilroy;font-weight:400;src:url(/fonts/Gilroy-Regular.ttf)}@font-face{font-family:instrument;src:url(/fonts/Instrument.ttf)}@font-face{font-family:matter;src:url(/fonts/Matter-Regular.ttf)}@font-face{font-family:neuehaas;src:url(/fonts/NeueHaasDisplayRoman.ttf)}@font-face{font-family:lato;src:url(/fonts/Lato-Regular.ttf)}@font-face{font-family:avenir;src:url(/fonts/AvenirLTStd-Roman.otf)}@font-face{font-family:walsheim;src:url(/fonts/GT-Walsheim.otf)}@font-face{font-family:cisco;src:url(/fonts/CiscoSans.ttf)}@font-face{font-family:nexa;src:url(/fonts/Nexa-Book.ttf)}@font-face{font-family:tt;src:url(/fonts/TTHoves-Regular.ttf)}@font-face{font-family:poly;src:url(/fonts/poly.otf)}@font-face{font-family:suisse;src:url(/fonts/SuisseIntl-Regular.ttf)}@font-face{font-family:aktiv;src:url(/fonts/AktivGrotesk-Light.ttf)}@font-face{font-family:Matter;src:url(/fonts/Matter-Light.ttf)}@font-face{font-family:balto;src:url(/fonts/Balto-Book.ttf)}@font-face{font-family:mona;src:url(/fonts/MonaSans-Regular.ttf)}@font-face{font-family:roobert;src:url(/fonts/Roobert-Regular.ttf)}@font-face{font-family:balto;font-weight:700;src:url(/fonts/Balto-Bold.woff2)}@font-face{font-family:now;src:url(/fonts/HelveticaNow.otf)}@font-face{font-family:now;font-weight:700;src:url(/fonts/helvetica-bold.ttf)}@font-face{font-family:satoshi;font-weight:700;src:url(/fonts/Satoshi-Regular.otf)}@font-face{font-family:passenger;font-weight:700;src:url(/fonts/Passenger.otf)}@font-face{font-family:dmsans;src:url(/fonts/DMSans.ttf)}@font-face{font-family:montreal;src:url(/fonts/ppneuemontreal-book.otf)}:root{--color-primary:#ff164c}*,:after,:before{box-sizing:border-box;margin:0}h1,h2,h3{font-weight:400;margin:0}body,html{margin:0;overscroll-behavior-y:none;padding:0}pre.shiki{border-radius:5px;padding:15px}code,pre.shiki{font-size:13px}body{color:#000;font-family:now,serif;font-size:15px;line-height:1.45}h1{font-size:1.8rem}h3{font-size:1.3rem;line-height:2;margin-bottom:-1rem}h1>a,h2>a,h3>a,h4>a,h5>a,h6>a{color:inherit;text-decoration:none}p{margin:.7rem 0}a{color:var(--color-primary);text-decoration:none}.img{width:100%}.img-side{float:left;width:300px}ol,ul{margin:.7rem 0}.article-icon{float:left;height:64px;margin-right:8px;margin-top:6px;width:64px}.shiki{overflow:clip}@keyframes zoom{to{opacity:0}}@keyframes opIn{to{opacity:100%}}@keyframes opacity{to{opacity:.5}}@keyframes blur{to{scale:1.3 1.3}}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.sticky{position:sticky}.left-0{left:0}.right-0{right:0}.top-0{top:0}.z-0{z-index:0}.mx-auto{margin-left:auto;margin-right:auto}.my-5{margin-top:1.25rem}.mb-5,.my-5{margin-bottom:1.25rem}.mt-3{margin-top:.75rem}.mt-\[10px\]{margin-top:10px}.flex{display:flex}.hidden{display:none}.h-\[215px\]{height:215px}.h-\[3px\]{height:3px}.h-\[82px\]{height:82px}.w-\[100\%\]{width:100%}.w-\[24px\]{width:24px}.w-\[5px\]{width:5px}.w-\[700px\]{width:700px}.transform{transform:translate(var(--tw-translate-x),var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.gap-1{gap:.25rem}.gap-3{gap:.75rem}.overflow-hidden{overflow:hidden}.rounded{border-radius:.25rem}.bg-\[color\:var\(--color-primary\)\]{background-color:var(--color-primary)}.bg-slate-100{--tw-bg-opacity:1;background-color:rgb(241 245 249/var(--tw-bg-opacity))}.bg-white{--tw-bg-opacity:1;background-color:rgb(255 255 255/var(--tw-bg-opacity))}.p-5{padding:1.25rem}.pb-\[20px\]{padding-bottom:20px}.pt-10{padding-top:2.5rem}.pt-4{padding-top:1rem}.text-center{text-align:center}.text-right{text-align:right}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-\[color\:var\(--color-primary\)\]{color:var(--color-primary)}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175/var(--tw-text-opacity))}.text-slate-100{--tw-text-opacity:1;color:rgb(241 245 249/var(--tw-text-opacity))}.text-slate-400{--tw-text-opacity:1;color:rgb(148 163 184/var(--tw-text-opacity))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255/var(--tw-text-opacity))}.shadow-\[0_5px_30px_-15px_rgba\(0\2c 0\2c 0\2c 0\.3\)\]{--tw-shadow:0 5px 30px -15px rgba(0,0,0,.3);--tw-shadow-colored:0 5px 30px -15px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-\[0_5px_30px_-15px_rgba\(0\2c 0\2c 0\2c 1\)\]{--tw-shadow:0 5px 30px -15px #000;--tw-shadow-colored:0 5px 30px -15px var(--tw-shadow-color)}.shadow-\[0_5px_30px_-15px_rgba\(0\2c 0\2c 0\2c 1\)\],.shadow-lg{box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);--tw-shadow-colored:0 10px 15px -3px var(--tw-shadow-color),0 4px 6px -4px var(--tw-shadow-color)}.duration-300{transition-duration:.3s}@keyframes abc{0%{opacity:0}to{opacity:1}}.headx{animation:abc 1s linear;animation-duration:1s;animation-fill-mode:forwards}.hero-background{background:url(/img/p1.webp);background:red;background-position:50%;background-size:cover;height:550px;position:fixed;top:0;z-index:500}.hover\:text-black:hover{--tw-text-opacity:1;color:rgb(0 0 0/var(--tw-text-opacity))}.hover\:shadow-\[0_5px_30px_-15px_rgba\(0\2c 0\2c 0\2c 0\.7\)\]:hover{--tw-shadow:0 5px 30px -15px rgba(0,0,0,.7);--tw-shadow-colored:0 5px 30px -15px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow,0 0 #0000),var(--tw-ring-shadow,0 0 #0000),var(--tw-shadow)}.span-1{grid-column:auto/span 1}.span-2{grid-column:auto/span 2}.span-3{grid-column:auto/span 3}@media only screen and (max-width:600px){.span-1,.span-2,.span-3{grid-column:auto/span 1}}.cards{display:grid;gap:20px;grid-template-columns:1fr 1fr 1fr}.container{width:1000px}.margin{margin-top:550px}@media only screen and (max-width:600px){.cards{grid-template-columns:1fr;padding:10px;width:auto}.container{margin-left:15px;margin-right:15px;width:auto}.margin{margin-top:300px}}.inner{-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);background-image:url(/img/me.jpeg);background-size:contain;border-radius:50%;color:#fff;height:120px;margin-bottom:10px;width:120px}.bar{align-items:center;background:hsla(0,0%,78%,.04);bottom:0;display:flex;flex-direction:column;left:0;padding:20px;position:absolute;top:0;width:64px;z-index:100}.hero{-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);background:radial-gradient(at top left,rgba(47,49,58,.97),rgba(26,27,35,.97));border-radius:7px;height:550px;margin-top:30px;overflow:clip;resize:both;width:1000px;@media only screen and (max-width:600px){height:300px;margin-left:15px;margin-right:15px;margin-top:15px;width:auto}}@media only screen and (max-width:600px){.header{padding-left:15px;width:auto}.post-container{padding:15px;width:auto}}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="true"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="true"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400&amp;display=swap"/><link rel="alternate" type="application/rss+xml" title="Gatsby Starter Blog RSS Feed" href="/rss.xml"/><link rel="icon" href="/favicon-32x32.png?v=4376dbdae9096a24eda7625764953946" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=4376dbdae9096a24eda7625764953946"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=4376dbdae9096a24eda7625764953946"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=4376dbdae9096a24eda7625764953946"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=4376dbdae9096a24eda7625764953946"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=4376dbdae9096a24eda7625764953946"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=4376dbdae9096a24eda7625764953946"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=4376dbdae9096a24eda7625764953946"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=4376dbdae9096a24eda7625764953946"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><header class="global-header"></header><main><div class="sticky top-0 left-0 right-0 text-white  h-[82px] shadow-lg mb-5" style="background:radial-gradient(at top center, rgba(47, 49, 58, 0.94), rgba(26, 27, 35, 0.94));font-size:16px"><div class="w-[700px] mx-auto flex items-center h-[82px] header"><img src="/img/me.jpeg" style="width:40px;border-radius:50%;margin-right:5px"/><a href="/" class="text-white">Florin Toader</a></div></div><title>Language Performance Doesn&#x27;t Matter (Most Of The Time)</title><meta name="og:image:secure_url" content="https://florintoader.me/2024-01-08-ddd-bdd/cucumber.jpg"/><meta name="og:description" content="Here&#x27;s something that might be a bit controversial: I believe that for most software projects, the performance of the language (C#, Golang) doesn&#x27;t matter that much. The reason I am writing this article is that I&#x27;ve seen an almost cultlike obsession with various languages and tech stacks, to the point where teams are pushing for a complete rewrite of the application. I believe this is  not warranted for most projects. "/><div class="h-[50px] bg-red-400"></div><article class="w-[700px] mx-auto pt-[10px] mb-[20px] mt-[150px] post-container" itemscope=""><header><h1 itemProp="headline">Language Performance Doesn&#x27;t Matter (Most Of The Time)</h1><p><i>March 06, 2024</i></p></header><section itemProp="articleBody"><p>Here’s something that might be a bit controversial: <em>I believe that for most software projects, the performance of the language (C#, Golang, PHP, Ruby) doesn’t matter that much. The reason I am writing this article is that I’ve seen an almost cultlike obsession with various languages and tech stacks, to the point where teams are pushing for a complete rewrite of the application. Even if there isn’t a push for a complete rewrite, there usually is a push for a <em>polyglot</em> microservice setup, which has its own problems.</em></p>
<p>I believe this is  not warranted for most projects, and I’ll explain why. But first, let’s look at a benchmark showing raw performance for different languages.</p>
<img src="perf.png" class="img" loading="lazy" />
<p>As we can see, there’s quite a big difference between, say C and PHP, and if you were to implement a game, or a database engine, the choice of langue would matter <em>a lot</em>. But most projects aren’t relational database engines or games. They are web applications.</p>
<h3>Inner Loop Optimization</h3>
<p>A common theme when thinking about optimizing code is the concept of <em>inner loop optimization</em>. Consider the following code:</p>
<pre class="shiki" style="background-color: #292D3E"><code><span class="line"><span style="color: #C792EA">let</span><span style="color: #A6ACCD"> before </span><span style="color: #89DDFF">=</span><span style="color: #A6ACCD"> </span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">,</span><span style="color: #A6ACCD"> after </span><span style="color: #89DDFF">=</span><span style="color: #A6ACCD"> </span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">,</span><span style="color: #A6ACCD"> inner </span><span style="color: #89DDFF">=</span><span style="color: #A6ACCD"> </span><span style="color: #F78C6C">0</span></span>
<span class="line"></span>
<span class="line"><span style="color: #89DDFF; font-style: italic">for</span><span style="color: #A6ACCD"> (</span><span style="color: #C792EA">let</span><span style="color: #A6ACCD"> i </span><span style="color: #89DDFF">=</span><span style="color: #A6ACCD"> </span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">;</span><span style="color: #A6ACCD"> i </span><span style="color: #89DDFF">&lt;</span><span style="color: #A6ACCD"> </span><span style="color: #F78C6C">100</span><span style="color: #89DDFF">;</span><span style="color: #A6ACCD"> i</span><span style="color: #89DDFF">++</span><span style="color: #A6ACCD">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #A6ACCD">before</span><span style="color: #89DDFF">++</span></span>
<span class="line"><span style="color: #F07178">  </span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF; font-style: italic">for</span><span style="color: #F07178">(</span><span style="color: #C792EA">let</span><span style="color: #F07178"> </span><span style="color: #A6ACCD">j</span><span style="color: #F07178"> </span><span style="color: #89DDFF">=</span><span style="color: #F07178"> </span><span style="color: #F78C6C">0</span><span style="color: #89DDFF">;</span><span style="color: #F07178"> </span><span style="color: #A6ACCD">j</span><span style="color: #F07178"> </span><span style="color: #89DDFF">&lt;</span><span style="color: #F07178"> </span><span style="color: #F78C6C">100</span><span style="color: #89DDFF">;</span><span style="color: #F07178"> </span><span style="color: #A6ACCD">j</span><span style="color: #89DDFF">++</span><span style="color: #F07178">) </span><span style="color: #89DDFF">{</span></span>
<span class="line"><span style="color: #F07178">    </span><span style="color: #A6ACCD">inner</span><span style="color: #89DDFF">++</span></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #F07178">  </span><span style="color: #A6ACCD">after</span><span style="color: #89DDFF">++</span></span>
<span class="line"><span style="color: #89DDFF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A6ACCD">console</span><span style="color: #89DDFF">.</span><span style="color: #82AAFF">log</span><span style="color: #A6ACCD">(</span><span style="color: #89DDFF">{</span><span style="color: #A6ACCD"> before</span><span style="color: #89DDFF">,</span><span style="color: #A6ACCD"> inner</span><span style="color: #89DDFF">,</span><span style="color: #A6ACCD"> after </span><span style="color: #89DDFF">}</span><span style="color: #A6ACCD">)</span></span></code></pre>
<p>Output:</p>
<pre class="shiki-unknown"><code>{ before: 100, inner: 10000, outer: 100 }</code></pre>
<p>As we can see, it’s the inner loop that takes a lot more processor time than the outer loop. When it comes to actual lines of code, the inner loop functionality isn’t necessarily more complex, it’s just being run more and so it takes more processor time.</p>
<h3>The Classic 3-Tier Architecture</h3>
<p>This is quite academic, so how does this help is? We need to consider a typical web app using a 3-tier architecture.</p>
<ol>
<li>You get an HTTP request.</li>
<li>Based on this request, you run some business logic that calls some ORM code.</li>
<li>The ORM code generates SQL, which is run against a relational database.</li>
<li>The results are then mapped and returned to the caller.</li>
</ol>
<p>If you do some profiling, you will find that most of the time is being spent on the database level. Operations such as mapping query results aren’t that computationally expensive.</p>
<p>Let’s consider a product page where users can filter and order based on categories such. Sorting and joins can abe expensive operations, and if indexes are not used properly, this can result in full table scans and even sorting done in temp tables.</p>
<img src="app.png" class="img" loading="lazy" />
<p>ORM performance does matter, however. Here is an interesting graph comparing the performance of different ORMs available for Node.js.</p>
<img src="performance.png" class="img" loading="lazy" />
<p>As you can see, yes, performance varies between them quite significantly, but then you have to ask yourself: can I simply scale up my database and are those costs worth it?</p>
<h3>Mitigating Performance Issues</h3>
<p>Since most performance bottlenecks happen at the database level, understanding the execution plan your ORM generates goes a long way. And when it comes to queries, joins and sorts have a big performance impact.</p>
<p>But there is a simpler way to mitigate performance issues: move code to the client.</p></section></article><div id="scroller" class="fixed h-[3px] left-0 top-0 bg-[color:var(--color-primary)]"></div></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2024-03-01-performance/";window.___webpackCompilationHash="6571ff6ef062454ce882";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-30f2bf2a1846f97f91ab.js"],"app":["/app-4dd56cb766cf2c35fd40.js"],"component---src-pages-404-js":["/component---src-pages-404-js-8450d0b5021920db5d71.js"],"component---src-pages-index-js":["/component---src-pages-index-js-db6940863929983b7fd6.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-26890ade02ac40ec90e1.js"]};/*]]>*/</script><script src="/polyfill-30f2bf2a1846f97f91ab.js" nomodule=""></script><script src="/app-4dd56cb766cf2c35fd40.js" async=""></script><script src="/framework-d9aa49d9654a57a5d41b.js" async=""></script><script src="/webpack-runtime-01335b8f5fd7f8de01d6.js" async=""></script></body></html>