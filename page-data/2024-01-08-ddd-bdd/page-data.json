{"componentChunkName":"component---src-templates-blog-post-js","path":"/2024-01-08-ddd-bdd/","result":{"data":{"site":{"siteMetadata":{"title":"Gatsby Starter Blog"}},"markdownRemark":{"id":"f9186b92-766b-5cb9-a357-7993c5c385d1","excerpt":"Any lawyer will tell you that legal contracts must follow very specific rules, otherwise they can be deemed invalid: you simply cannot type whatever you want in…","html":"<p>Any lawyer will tell you that legal contracts must follow very specific rules, otherwise they can be deemed invalid: you simply cannot type whatever you want in a contract, it must follow a specific structure, use specific legal terms and so forth. In the case of software agencies, these must pe paired with a very precise set of specifications. Trust me, I’ve been there.</p>\n<p>Even if you aren’t an agency, there is still value in spending extra time and effort on defining what it is you want, because building something takes a lot more time than thinking about what you want to build.</p>\n<p>Think of specs as a contract between the product owner and the development team. Even if nobody gets sued, there is a risk of time being spent on implementing the wrong thing. This in turn can lead to rebuilding portions of the application under time pressure, frustration in the team, people trying to shift blame, etc. While developers can ask for clarifications if they don’t understand something, sometimes there are unknown unknowns, or they simply might have thought they understood everything.</p>\n<p><em>I’ve been in situations where I thought I understood the requirements, the technical lead thought he understood them, the UX designer thought the same, and each of us understood it quite differently. Complex domains might involve hundreds of types of domain objects: products, records, items, comments, tasks, categories, accounts, users etc.</em></p>\n<h2>Domain Driven Design</h2>\n<p>A PO can have a good understanding of what the client wants, but if that is not properly communicated to the devs, it’s a problem. In general, communication is subjective, because people project their own views and biases on whatever nuggets of information they get.</p>\n<p>None of this is new, and there have been several attempts to tackle this problem. One of them is Domain Driven Design.</p>\n<img src=\"ddd.jpg\" class=\"img\" />\n<p>Eric Evan’s book is quite dense and probably not the easiest read, but if I could take away a few key concepts, they would probably be these:</p>\n<ul>\n<li>Ubiquitous language: always refer to business entities in a way that’s consistent. Don’t refer to a record as a log, for example. A user and an account might be two different things (e.g. a user might have access to multiple accounts).</li>\n<li>Bounded contexts: if your logic is complex, you might be able to draw boundries around various sections, which helps with abstracting away these sections.</li>\n<li>Continuous collaboration: there needs to be a way in which members of the team communicate.</li>\n</ul>\n<p>To me, DDD is a lot like pesudo code. Pseudo code is nice because you don’t have to be familiar with all the all the syntax details specific to a specific programming language, but</p>\n<p>Which means a few things:</p>\n<ol>\n<li>The table in the database must be named the same way the PO refers to it.</li>\n<li>The UX labels must be consistent.</li>\n<li>Variables, etc. must adehere to the convetion.</li>\n</ol>\n<p>This sounds self explanatory, but you’d be surprised how many projects don’t follow this convention.</p>\n<h2>Tooling</h2>\n<p>We need a tool to sketch this down. And there’s nothing better than a database tool, because we can capture the properties of the objects, the relationships between them etc.</p>\n<img src=\"domain.png\" class=\"img\" />\n<p>It’s worth mentioning that this is the actual domain model, the actual database schema might actually contain more (internal) columns.</p>\n<h2>Behavior Driven Development</h2>\n<p>Most developers are familiar with TDD, and if your team has the budget for it (it can be expensive, and some teams tend to go with the 20/80 rule, where they only cover the 20% of the code that’s responsible with the majority of the bugs).</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #FFCB6B\">Feature</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> Account Holder withdraws cash</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\"> </span></span>\n<span class=\"line\"><span style=\"color: #FFCB6B\">Scenario</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #A6ACCD\"> Account has sufficient funds</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">    Given The account balance is $100</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      And the card is valid</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      And the machine contains enough money</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">     When the Account Holder requests $20</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">     Then the ATM should dispense $20</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      And the account balance should be $80</span></span>\n<span class=\"line\"><span style=\"color: #A6ACCD\">      And the card should be returned</span></span></code></pre>\n<p><em>“The account balance is $100”</em>, <em>“the card is valid”</em> are called bindings. They actually translate to code.</p>\n<p>Consider that each of these lines: a lot of these lines translate to code. Cucumber creates a set of constraints for the product owner, similarly to how a control library with a theme would constrain the designer.</p>\n<pre class=\"shiki\" style=\"background-color: #292D3E\"><code><span class=\"line\"><span style=\"color: #82AAFF\">@When</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">^I click the </span><span style=\"color: #A6ACCD\">\\&quot;</span><span style=\"color: #C3E88D\">([^</span><span style=\"color: #A6ACCD\">\\&quot;</span><span style=\"color: #C3E88D\">]+)</span><span style=\"color: #A6ACCD\">\\&quot;</span><span style=\"color: #C3E88D\"> button$</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #C792EA\">public</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">void</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #82AAFF\">clickButton</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #FFCB6B\">String</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #FFCB6B\">buttonName</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #A6ACCD\"> </span><span style=\"color: #89DDFF\">{</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">    </span><span style=\"color: #676E95; font-style: italic\">// Code to click the button with the specified name</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">}</span></span></code></pre>\n<p>What is interesting is that by getting POs to write specs in Cucumber, we have created <em>a framework of specs</em>.</p>\n<h3>Advantages / Disadvantages</h3>\n<p>Just as TDD, BDD can be costly in terms of time to implement.</p>","frontmatter":{"title":"Atomic Specs: DDD and BDD Are a Match Made In Heaven","date":"January 06, 2024","description":"Any lawyer will tell you that contracts need to be specific, otherwise they can be thrown out of court quite easily. Prenuptial agreements are famous for being thrown out of court. In the Pacific Bell v. Superior Court of Alameda County case, the court held that a contract between a telephone company and its customers was invalid because it was ambiguous and did not clearly define the scope of the company’s services. ","image":"cucumber.jpg","cells":null}},"previous":{"fields":{"slug":"/2024-01-06-modules/"},"frontmatter":{"title":"Should I Pre-Decouple Modules In My Modular Monolith?"}},"next":{"fields":{"slug":"/2024-01-06-modules/"},"frontmatter":{"title":"Should I Pre-Decouple Modules In My Modular Monolith?"}}},"pageContext":{"id":"f9186b92-766b-5cb9-a357-7993c5c385d1"}},"staticQueryHashes":[]}